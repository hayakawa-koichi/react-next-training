# パフォーマンス最適化

React では不要なレンダリングを避けるために、React.memo, useMemo, useCallback が利用される。\
本ページでは使用方法、タイミングを記載する。

# useCallback

関数に対して使用。(処理をメモ化)

メモ化されたコールバック関数を返すフック。\
イベントハンドラーのような callback 関数をメモ化し、不要に生成される関数インスタンスの作成を抑制、\
再描画を減らすことにより、都度計算しなくて良くなることからパフォーマンスを向上が期待できる。

React.memo と併用することで、コンポーネントの不要な再レンダリングをスキップできる

```js
//[deps]は依存配列(コールバック関数が依存している要素が格納された配列)
useCallback(callbackFunction, [deps]);
```

# React.memo

コンポーネントに対して使用。

コンポーネントが返した React 要素を記録し、再レンダーされそうになった時に\
本当に再レンダーが必要かどうかをチェックして、必要な場合のみ再レンダーする。

1. 本当に再レンダーが必要かどうかをチェック
2. メモ化によりコンポーネントの再描画をスキップ
3. 必要な場合のみ再レンダー

```js
// メモ化したいコンポーネントをラップして使うことで、不要な再レンダリングを防ぐ。
const メモ化されたコンポーネント = React.memo(
  元のコンポーネント,
  (prevProps, nextProps) => {
    /* true or flase */
  }
);
```

# useMemo

計算結果の値をメモ化

```js
// render時に毎回重い処理をするのを避けたいときとか。
// a, bの値の変更を検知して再計算する。
const memoizedValue = useMemo(() => computeExpensiveValue(a, b), [a, b]);
```
